---
title: "Election1982"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,warning = FALSE)

# Load the packages
library(data.table)
library(stringr)
library(splitstackshape)
library(pdftools)
```

# Structure of Document

Data extraction begins from page 4 of the document. Each page from here has a 
table representing  each district. All tables follow the similar format. 

If we consider the columns, first column is for candidate names with other counts,
second column and its consecutive columns are for electorates. Final two columns
are Postal Votes and Final District Results. 

Each cell has two numeric values which are number of votes and percentages, this is 
true except for the last row. First 3 rows are for candidates names, followed by 
No of Valid Votes, No of Rejected Votes, Total No of Votes Polled and 
finally Total No of Registered Electors but mistakenly written as No of Rejected Electors.

![](Fig1.JPG)

# Process of Extraction

Each table has been extracted separately without any issues. Two inputs are 
used, one is page number and other is for special cases of several districts. 
Two functions were created to extract two types of tables, yet both of them
look similar except a few anomalies.

```{r Election 1988}
# load the pdf file
SL_PE_1982<-pdf_text("PresidentialElections1982.pdf")

# source the function
source("Extract1982.R")

# creating initial dataset Election1994
Election1982<-NULL

# special pages which has the same format 
pages<-c(8:9,11,14:17,19,23,25)

for (i in pages) 
{
    Election1982[[i]]<-Extract_Table1982(i)    
}
    Election1982[[4]]<-Extract_Table1982(4,Colo=TRUE)    

    Election1982[[7]]<-Extract_Table1982(7,Maha=TRUE)
    
    Election1982[[10]]<-Extract_Table1982(10,Ga=TRUE)
    
    Election1982[[18]]<-Extract_Table1982(18,Kur=TRUE)    
    
    Election1982[[24]]<-Extract_Table1982(24,Keg = TRUE)        

    Election1982[[5]]<-Extract_Table2_1982(5,Gam=TRUE)
    
    Election1982[[6]]<-Extract_Table2_1982(6)

    Election1982[[12]]<-Extract_Table2_1982(12,HP=TRUE)
    
    Election1982[[21]]<-Extract_Table2_1982(21,HP=TRUE)
    
    Election1982[[13]]<-Extract_Table2_1982(13,Jaf=TRUE)    
    
    Election1982[[20]]<-Extract_Table2_1982(20,Anu = TRUE)        
    
    Election1982[[22]]<-Extract_Table2_1982(22,Bad = TRUE)        
        
# final data set
Election1982<-do.call("rbind",Election1982)
```

# Validating Data Extracted

## Checking for Number of Registered Electors.

It should have been 8117015(still mis calculated) but mistakenly 
written as 8145015.

![](Fig2.JPG)

```{r Reg Electors}
# Extracting only Final District District Results of 
# Number of Registered Electors
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="No of Registered Electors")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]

# Extracting except Final District District Results of 
# Number of Registered Electors
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="No of Registered Electors")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

8116992 is more accurate than 8117025. Because the values are directly from
the electorates than the tallied district tables. Exactly 33 extra votes are 
added because of mis calculation. 

### Colombo District

![](Fig21.JPG)

```{r Reg Elec Validating Colombo }
ElecFinal1982<-subset(Election1982, District=="Colombo" & Electorate !="Total"
                      & ColNames=="No of Registered Electors")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

The tallied table has 5 extra votes.

### Matale District

![](Fig22.JPG)

```{r Reg Elec Validating Matale }
ElecFinal1982<-subset(Election1982, District=="Matale" & Electorate !="Total"
                      & ColNames=="No of Registered Electors")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

The tallied table has 10 extra votes. 

### Monaragala District

![](Fig23.JPG)

```{r Reg Elec Validating Monaragala}
ElecFinal1982<-subset(Election1982, District=="Monaragala" & Electorate !="Total"
                      & ColNames=="No of Registered Electors")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

The tallied table has 18 extra votes. So there is 33 votes extra in the tallied
vote count. Final Count for No of Registered Electors is 8116992.

## Total Polled 

![](Fig2.JPG)

```{r Total Polled}
# Extracting only Final District District Results of 
# Total Polled
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Total No of Votes Polled")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]

# Extracting except Final District District Results of 
# Total Polled
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Total No of Votes Polled")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

There is exactly 10000 votes extra in the tallied district tables.

### Nuwara-Eliya District

![](Fig24.JPG)

```{r Total Polled Nuwara-Eliya District}
ElecFinal1982<-subset(Election1982, District=="Nuwara-Eliya" & Electorate !="Total"
                      & ColNames=="Total No of Votes Polled")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

Extra 10000 votes are from miscalculation of the Nuwara-Eliya district.
So the final value for Total No of Votes Polled is 6592617.

## Total Rejected

![](Fig3.JPG)

The value for rejected votes is not true here because the value for Nuwara-Eliya
district is wrong in this district tallied table. Which means 30 votes are not
added properly

![](Fig30.JPG)

```{r Total rejected Nuwara-Eliya District}
ElecFinal1982<-subset(Election1982, District=="Nuwara-Eliya" & Electorate !="Total"
                      & ColNames=="No of Rejected Votes")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

```{r Total rejected}
# Extracting only Final District District Results of 
# No of Rejected Votes
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="No of Rejected Votes")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]

# Extracting except Final District District Results of 
# No of Rejected Votes
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="No of Rejected Votes")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

From the two values second value is more accurate, which means 10 votes 
are not added. They are from the Batticaloa district.

### Batticaloa District

![](Fig31.JPG)

```{r Total rejected Batticaloa District}
ElecFinal1982<-subset(Election1982, District=="Batticaloa" & Electorate !="Total"
                      & ColNames=="No of Rejected Votes")

ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

So the Final Vote count for No of Rejected Votes is 80500.

## Total Valid

![](Fig3.JPG)

Could not figure it out.

```{r Total Valid}
# Extracting only Final District District Results of 
# No of Valid Votes
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="No of Valid Votes")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# No of Valid Votes
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="No of Valid Votes")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]
```


## Comparing final tally votes of Mr.J.R. Jayawardene

![](Fig4.JPG)

Could not figure it out.

```{r Validating the data 1}
# Extracting only Final District District Results of 
# Mr.J.R. Jayawardene
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Mr.J.R. Jayawardene")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Mr.J.R. Jayawardene
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Mr.J.R. Jayawardene")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

Second value is more accurate because it is directly from the electorates.

## Comparing final tally votes of Mr.H.S.R.B.K. Kobbekaduwa

![](Fig4.JPG)

No issues here. It should be 2546438 but mistakenly added 
2548438 is what i believe.

```{r Vaildating the data 2}
# Extracting only Final District District Results of 
# Mr.H.S.R.B.K. Kobbekaduwa
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Mr.H.S.R.B.K. Kobbekaduwa")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Mr.H.S.R.B.K. Kobbekaduwa
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Mr.H.S.R.B.K. Kobbekaduwa")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

## Comparing final tally votes of  Mr. Rohana Wijeweera  

No issues here.

![](Fig4.JPG)

```{r Vaildating the data 3}
# Extracting only Final District District Results of 
#  Mr. Rohana Wijeweera 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Mr. Rohana Wijeweera")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Mr. Rohana Wijeweera 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Mr. Rohana Wijeweera")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

## Comparing final tally votes of  Mr. G.G. Ponnambalam  

No issues here.

![](Fig4.JPG)

```{r Vaildating the data 4}
# Extracting only Final District District Results of 
#  Mr. G.G. Ponnambalam 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Mr.G.G. Ponnambalam")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Mr. G.G. Ponnambalam
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Mr.G.G. Ponnambalam")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

## Comparing final tally votes of  Dr. Colvin R. De Silva   

Could not figure it out.

![](Fig4.JPG)

```{r Vaildating the data 5}
# Extracting only Final District District Results of 
# Dr. Colvin R. De Silva 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Dr. Colvin R. De Silva")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Dr. Colvin R. De Silva 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Dr. Colvin R. De Silva")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

Second value is more accurate because it is directly from the electorates.

## Comparing final tally votes of  Mr. Vasudeva Nanayakakra   

Could not figure it out.

![](Fig4.JPG)

```{r Vaildating the data 6}
# Extracting only Final District District Results of 
# Mr. Vasudeva Nanayakakra 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate=="Total" 
                      & ColNames=="Mr. Vasudeva Nanayakkara")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes),by="ColNames"]

# Extracting except Final District District Results of 
# Mr. Vasudeva Nanayakakra 
# and then adding all the votes 
ElecFinal1982<-subset(Election1982,Electorate!="Total" 
                      & ColNames=="Mr. Vasudeva Nanayakkara")
# added votes will be cross checked with the pdf document
ElecFinal1982[,sum(Votes,na.rm = TRUE),by="ColNames"]
```

Second value is more accurate because it is directly from the electorates.

*THANK YOU*